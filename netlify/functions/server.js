const pickupPoints = [
  // Барановичи
  {
    id: 10201,
    city: "Барановичи",
    name: "СППС №10201",
    address: "г.Барановичи, ул.50 лет БССР, д.31",
    working_hours: "Пн-Сб: с 10:00 до 20:00 обед 14:00 до 14:30",
    phone: "+375-163-00-00-00",
    delivery_address: "г.Барановичи, ул.50 лет БССР, д.31, Беларусь"
  },
  {
    id: 10202,
    city: "Барановичи", 
    name: "СППС №10202",
    address: "г.Барановичи,ул.Комсомольская,д.16,пом.2",
    working_hours: "Пн-Сб: с 10:00 до 20:00 обед 14:00 до 14:30",
    phone: "+375-163-00-00-00",
    delivery_address: "г.Барановичи,ул.Комсомольская,д.16,пом.2, Беларусь"
  },

  // Береза
  {
    id: 10601,
    city: "Береза",
    name: "СППС №10601", 
    address: "г.Берёза, пер. Армейский, 4, пом.22",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-164-00-00-00",
    delivery_address: "г.Берёза, пер. Армейский, 4, пом.22, Беларусь"
  },

  // Бобруйск
  {
    id: 60201,
    city: "Бобруйск",
    name: "СППС №60201",
    address: "г.Бобруйск, ул. Чехова, 33",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-225-00-00-00",
    delivery_address: "г.Бобруйск, ул. Чехова, 33, Беларусь"
  },
  {
    id: 60202,
    city: "Бобруйск",
    name: "СППС №60202",
    address: "г.Бобруйск, ул.Комсомольская д.36-1",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-225-00-00-00",
    delivery_address: "г.Бобруйск, ул.Комсомольская д.36-1, Беларусь"
  },

  // Борисов
  {
    id: 50101,
    city: "Борисов",
    name: "СППС №50101",
    address: "г.Борисов, ул.Чапаева д.49, корп.1",
    working_hours: "Пн-Пт: с 10:30 до 18:00; Сб.: с 09:30 до 11:00",
    phone: "+375-177-00-00-00",
    delivery_address: "г.Борисов, ул.Чапаева д.49, корп.1, Беларусь"
  },

  // Брест
  {
    id: 10101,
    city: "Брест",
    name: "СППС №10101",
    address: "г.Брест, ул. Cоветской Конституции 18",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-162-00-00-00",
    delivery_address: "г.Брест, ул. Cоветской Конституции 18, Беларусь"
  },
  {
    id: 10102,
    city: "Брест",
    name: "СППС №10102", 
    address: "г.Брест, ул. Мицкевича, 17-18",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-162-00-00-00",
    delivery_address: "г.Брест, ул. Мицкевича, 17-18, Беларусь"
  },
  {
    id: 10103,
    city: "Брест",
    name: "СППС №10103",
    address: "г. Брест, ул. Морозова, 5-3",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-162-00-00-00",
    delivery_address: "г. Брест, ул. Морозова, 5-3, Беларусь"
  },

  // Витебск
  {
    id: 20101,
    city: "Витебск",
    name: "СППС №20101",
    address: "г.Витебск, ул.Ленинградская, 138А, корп. 5",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-212-00-00-00",
    delivery_address: "г.Витебск, ул.Ленинградская, 138А, корп. 5, Беларусь"
  },
  {
    id: 20102,
    city: "Витебск",
    name: "СППС №20102",
    address: "г.Витебск, пр-т Черняховского, 32В-1 (каб.: №102)",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-212-00-00-00",
    delivery_address: "г.Витебск, пр-т Черняховского, 32В-1 (каб.: №102), Беларусь"
  },
  {
    id: 20103,
    city: "Витебск",
    name: "СППС №20103",
    address: "г.Витебск, ул.Короткевича,1А-122",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-212-00-00-00",
    delivery_address: "г.Витебск, ул.Короткевича,1А-122, Беларусь"
  },

  // Волковыск
  {
    id: 40301,
    city: "Волковыск",
    name: "СППС №40301",
    address: "г. Волковыск, ул. Зенитчиков,46Г-4",
    working_hours: "Пн-Пт: с 10:00 до 18:00 (обед 13:00-14:00); Сб.: с 08:00 до 20:00",
    phone: "+375-151-00-00-00",
    delivery_address: "г. Волковыск, ул. Зенитчиков,46Г-4, Беларусь"
  },

  // Гомель
  {
    id: 30101,
    city: "Гомель",
    name: "СППС №30101",
    address: "г.Гомель, ул. 2-я Гражданская д.5",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-232-00-00-00",
    delivery_address: "г.Гомель, ул. 2-я Гражданская д.5, Беларусь"
  },
  {
    id: 30102,
    city: "Гомель",
    name: "СППС №30102",
    address: "г.Гомель, ул.Новополесская, 2-1а",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-232-00-00-00",
    delivery_address: "г.Гомель, ул.Новополесская, 2-1а, Беларусь"
  },

  // Горки
  {
    id: 60401,
    city: "Горки",
    name: "СППС №60401",
    address: "г.Горки,ул.Советская, д.9-1",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-223-00-00-00",
    delivery_address: "г.Горки,ул.Советская, д.9-1, Беларусь"
  },

  // Гродно
  {
    id: 40101,
    city: "Гродно",
    name: "СППС №40101",
    address: "г.Гродно, ул. Горького, 91 (заезд со стороны ул.Курчатова)",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-152-00-00-00",
    delivery_address: "г.Гродно, ул. Горького, 91 (заезд со стороны ул.Курчатова), Беларусь"
  },
  {
    id: 40102,
    city: "Гродно",
    name: "СППС №40102",
    address: "г. Гродно, ул.Захарова, д.24, помещение №220",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-152-00-00-00",
    delivery_address: "г. Гродно, ул.Захарова, д.24, помещение №220, Беларусь"
  },
  {
    id: 40103,
    city: "Гродно",
    name: "СППС №40103",
    address: "г. Гродно проспект Янки Купалы д 73, пом. 2",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-152-00-00-00",
    delivery_address: "г. Гродно проспект Янки Купалы д 73, пом. 2, Беларусь"
  },
  {
    id: 40104,
    city: "Гродно",
    name: "СППС №40104",
    address: "г.Гродно, ул.Великая Ольшанка, 17-69",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-152-00-00-00",
    delivery_address: "г.Гродно, ул.Великая Ольшанка, 17-69, Беларусь"
  },

  // Жлобин
  {
    id: 30301,
    city: "Жлобин",
    name: "СППС №30301",
    address: "г. Жлобин, ул.Козлова 23/4",
    working_hours: "Пн-Пт: с 10:30 до 18:00; Сб.: с 09:30 до 11:00",
    phone: "+375-233-00-00-00",
    delivery_address: "г. Жлобин, ул.Козлова 23/4, Беларусь"
  },

  // Жодино
  {
    id: 50501,
    city: "Жодино",
    name: "СППС №50501",
    address: "г.Жодино, ул.50 лет Октября, 10В",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 08.00 до 22.00",
    phone: "+375-175-00-00-00",
    delivery_address: "г.Жодино, ул.50 лет Октября, 10В, Беларусь"
  },

  // Ивацевичи
  {
    id: 10501,
    city: "Ивацевичи",
    name: "СППС №10501",
    address: "г. Ивацевичи, ул. Горького, д. 22/6",
    working_hours: "Пн-Пт: с 10:00 до 18:00 обед с 13:00 до 14:00",
    phone: "+375-164-00-00-00",
    delivery_address: "г. Ивацевичи, ул. Горького, д. 22/6, Беларусь"
  },

  // Калинковичи
  {
    id: 30601,
    city: "Калинковичи",
    name: "СППС №30601",
    address: "г.Калинковичи, ул.Интернациональная,1Б",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 09:00 до 21:00",
    phone: "+375-234-00-00-00",
    delivery_address: "г.Калинковичи, ул.Интернациональная,1Б, Беларусь"
  },

  // Кобрин
  {
    id: 10401,
    city: "Кобрин",
    name: "СППС №10401",
    address: "г.Кобрин, ул. Радищева, 6",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-164-00-00-00",
    delivery_address: "г.Кобрин, ул. Радищева, 6, Беларусь"
  },

  // Кричев
  {
    id: 60301,
    city: "Кричев",
    name: "СППС №60301",
    address: "г.Кричев, ул. Трудовая,1",
    working_hours: "Пн-Пт: с 10:00 до 17:30, обед с 12:00 до 16:00",
    phone: "+375-224-00-00-00",
    delivery_address: "г.Кричев, ул. Трудовая,1, Беларусь"
  },

  // Лепель
  {
    id: 20401,
    city: "Лепель",
    name: "СППС №20401",
    address: "г. Лепель, Оршанское шоссе 1, КДУПМС «Лепельское ПМС»",
    working_hours: "Пн-Пт: с 10:30 до 18:00; Сб.: с 09:30 до 11:00",
    phone: "+375-213-00-00-00",
    delivery_address: "г. Лепель, Оршанское шоссе 1, КДУПМС «Лепельское ПМС», Беларусь"
  },

  // Лида
  {
    id: 40201,
    city: "Лида",
    name: "СППС №40201",
    address: "г.Лида, ул.Дзержинского,73",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-154-00-00-00",
    delivery_address: "г.Лида, ул.Дзержинского,73, Беларусь"
  },
  {
    id: 40202,
    city: "Лида",
    name: "СППС №40202",
    address: "г. Лида, бульвар Князя Гедимина, 12-13",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-154-00-00-00",
    delivery_address: "г. Лида, бульвар Князя Гедимина, 12-13, Беларусь"
  },

  // Минск (13 пунктов)
  {
    id: 70101,
    city: "Минск",
    name: "СППС №70101",
    address: "Минский р-н, Ждановичский с/c, 51, р-н д. Дегтяревка",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "Минский р-н, Ждановичский с/c, 51, р-н д. Дегтяревка, Беларусь"
  },
  {
    id: 70102,
    city: "Минск",
    name: "СППС №70102",
    address: "г.Минск, пер.Промышленный, д.9/5",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, пер.Промышленный, д.9/5, Беларусь"
  },
  {
    id: 70103,
    city: "Минск",
    name: "СППС №70103",
    address: "г.Минск, ул.Бельского, 14-1н",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, ул.Бельского, 14-1н, Беларусь"
  },
  {
    id: 70104,
    city: "Минск",
    name: "СППС №70104",
    address: "Минская область, Минский район, д. Боровая, 3",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "Минская область, Минский район, д. Боровая, 3, Беларусь"
  },
  {
    id: 70105,
    city: "Минск",
    name: "СППС №70105",
    address: "г.Минск,ул. Маяковского 11-193",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск,ул. Маяковского 11-193, Беларусь"
  },
  {
    id: 70106,
    city: "Минск",
    name: "СППС №70106",
    address: "г.Минск, ул. Кирилла Туровского, 12-152",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, ул. Кирилла Туровского, 12-152, Беларусь"
  },
  {
    id: 70107,
    city: "Минск",
    name: "СППС №70107",
    address: "г.Минск, ул.Богдановича, д.134",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, ул.Богдановича, д.134, Беларусь"
  },
  {
    id: 70108,
    city: "Минск",
    name: "СППС №70108",
    address: "г.Минск, пр. Машерова 76А-2",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, пр. Машерова 76А-2, Беларусь"
  },
  {
    id: 70109,
    city: "Минск",
    name: "СППС №70109",
    address: "г. Минск, ул. Сергея Есенина, 6-193",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г. Минск, ул. Сергея Есенина, 6-193, Беларусь"
  },
  {
    id: 70110,
    city: "Минск",
    name: "СППС №70110",
    address: "г.Минск, ул.Янки Лучины, 10",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, ул.Янки Лучины, 10, Беларусь"
  },
  {
    id: 70111,
    city: "Минск",
    name: "СППС №70111",
    address: "г. Минск,ул.Налибокская,38-133",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г. Минск,ул.Налибокская,38-133, Беларусь"
  },
  {
    id: 70112,
    city: "Минск",
    name: "СППС №70112",
    address: "г.Минск, пр-т Дзержинского,20-211",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г.Минск, пр-т Дзержинского,20-211, Беларусь"
  },
  {
    id: 70113,
    city: "Минск",
    name: "СППС №70113",
    address: "г. Минск, ул. Братская 15-289",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 13:00 до 14:00; Сб.: с 10:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-17-000-00-00",
    delivery_address: "г. Минск, ул. Братская 15-289, Беларусь"
  },

  // Могилев
  {
    id: 60101,
    city: "Могилев",
    name: "СППС №60101",
    address: "г.Могилев, ул.Калужская, 37",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00 (обед с 13:00 до 14:00)",
    phone: "+375-222-00-00-00",
    delivery_address: "г.Могилев, ул.Калужская, 37, Беларусь"
  },
  {
    id: 60102,
    city: "Могилев",
    name: "СППС №60102",
    address: "г.Могилев, ул.Первомайская, 20Б-1",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00 (обед с 13:00 до 14:00)",
    phone: "+375-222-00-00-00",
    delivery_address: "г.Могилев, ул.Первомайская, 20Б-1, Беларусь"
  },
  {
    id: 60103,
    city: "Могилев",
    name: "СППС №60103",
    address: "г.Могилев, проспект Пушкинский 16",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00 (обед с 13:00 до 14:00)",
    phone: "+375-222-00-00-00",
    delivery_address: "г.Могилев, проспект Пушкинский 16, Беларусь"
  },

  // Мозырь
  {
    id: 30201,
    city: "Мозырь",
    name: "СППС №30201",
    address: "г.Мозырь,ул.Котловца М.П., д.2Д",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-236-00-00-00",
    delivery_address: "г.Мозырь,ул.Котловца М.П., д.2Д, Беларусь"
  },
  {
    id: 30202,
    city: "Мозырь",
    name: "СППС №30202",
    address: "г.Мозырь, ул. Советская 130-49",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-236-00-00-00",
    delivery_address: "г.Мозырь, ул. Советская 130-49, Беларусь"
  },

  // Молодечно
  {
    id: 50201,
    city: "Молодечно",
    name: "СППС №50201",
    address: "г.Молодечно, ул.Городокская,104",
    working_hours: "Пн-Пт: с 10:30 до 18:00; Сб.: с 09:30 до 11:00",
    phone: "+375-176-00-00-00",
    delivery_address: "г.Молодечно, ул.Городокская,104, Беларусь"
  },

  // Новогрудок
  {
    id: 40601,
    city: "Новогрудок",
    name: "СППС №40601",
    address: "г. Новогрудок, ул. Заводская,2А",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 09:00 до 20:00",
    phone: "+375-159-00-00-00",
    delivery_address: "г. Новогрудок, ул. Заводская,2А, Беларусь"
  },

  // Новополоцк
  {
    id: 20301,
    city: "Новополоцк",
    name: "СППС №20301",
    address: "г. Новополоцк, пер. Рижский, 5А",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-214-00-00-00",
    delivery_address: "г. Новополоцк, пер. Рижский, 5А, Беларусь"
  },
  {
    id: 20501,
    city: "Новополоцк",
    name: "СППС №20501",
    address: "г.Новополоцк, ул. Калинина д.5а к.6",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед с 13:00 до 14:00",
    phone: "+375-214-00-00-00",
    delivery_address: "г.Новополоцк, ул. Калинина д.5а к.6, Беларусь"
  },

  // Орша
  {
    id: 20201,
    city: "Орша",
    name: "СППС №20201",
    address: "г.Орша, ул.Ленина, 219",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-216-00-00-00",
    delivery_address: "г.Орша, ул.Ленина, 219, Беларусь"
  },
  {
    id: 20202,
    city: "Орша",
    name: "СППС №20202",
    address: "г.Орша, ул.Владимира Ленина 50, объект 21",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-216-00-00-00",
    delivery_address: "г.Орша, ул.Владимира Ленина 50, объект 21, Беларусь"
  },

  // Осиповичи
  {
    id: 60501,
    city: "Осиповичи",
    name: "СППС №60501",
    address: "г. Осиповичи, ул. Интернациональная, 15",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-223-00-00-00",
    delivery_address: "г. Осиповичи, ул. Интернациональная, 15, Беларусь"
  },

  // Пинск
  {
    id: 10301,
    city: "Пинск",
    name: "СППС №10301",
    address: "г.Пинск, ул.Базовая, 16/2",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед в субботу с 13:00 до 14:00",
    phone: "+375-165-00-00-00",
    delivery_address: "г.Пинск, ул.Базовая, 16/2, Беларусь"
  },
  {
    id: 10302,
    city: "Пинск",
    name: "СППС №10302",
    address: "г.Пинск,пл.Ленина 3-59",
    working_hours: "Пн-Пт: с 10:00 до 20:00, обед с 14:00 до 14:30; Сб.: с 11:00 до 17:00, обед в субботу с 13:00 до 14:00",
    phone: "+375-165-00-00-00",
    delivery_address: "г.Пинск,пл.Ленина 3-59, Беларусь"
  },

  // Полоцк
  {
    id: 20302,
    city: "Полоцк",
    name: "СППС №20302",
    address: "г.Полоцк ул.Гоголя 27/41, пом.110",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-214-00-00-00",
    delivery_address: "г.Полоцк ул.Гоголя 27/41, пом.110, Беларусь"
  },

  // Речица
  {
    id: 30402,
    city: "Речица",
    name: "СППС №30402",
    address: "г. Речица, ул. Сыдько, 236/4",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 08.00 до 23.00",
    phone: "+375-234-00-00-00",
    delivery_address: "г. Речица, ул. Сыдько, 236/4, Беларусь"
  },

  // Светлогорск
  {
    id: 30501,
    city: "Светлогорск",
    name: "СППС №30501",
    address: "г.Светлогорск, ул.Социалистическая,65/1",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-234-00-00-00",
    delivery_address: "г.Светлогорск, ул.Социалистическая,65/1, Беларусь"
  },

  // Слоним
  {
    id: 40401,
    city: "Слоним",
    name: "СППС №40401",
    address: "г.Слоним, ул. Карла Маркса, 5-12",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-156-00-00-00",
    delivery_address: "г.Слоним, ул. Карла Маркса, 5-12, Беларусь"
  },

  // Слуцк
  {
    id: 50301,
    city: "Слуцк",
    name: "СППС №50301",
    address: "г.Слуцк, ул. Максима Богдановича 13 в/г (заезд со стороны ул.Каменка)",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 09:30 до 11:00",
    phone: "+375-179-00-00-00",
    delivery_address: "г.Слуцк, ул. Максима Богдановича 13 в/г (заезд со стороны ул.Каменка), Беларусь"
  },
  {
    id: 50302,
    city: "Слуцк",
    name: "СППС №50302",
    address: "г. Слуцк, ул. Ленина, д.195А",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00; Сб.: с 09:30 до 11:00",
    phone: "+375-179-00-00-00",
    delivery_address: "г. Слуцк, ул. Ленина, д.195А, Беларусь"
  },

  // Сморгонь
  {
    id: 40501,
    city: "Сморгонь",
    name: "СППС №40501",
    address: "г.Сморгонь, ул. Я. Коласа,120Б",
    working_hours: "Пн-Пт: с 10:00 до 18:00, обед с 13:00 до 14:00",
    phone: "+375-159-00-00-00",
    delivery_address: "г.Сморгонь, ул. Я. Коласа,120Б, Беларусь"
  },

  // Солигорск
  {
    id: 50401,
    city: "Солигорск",
    name: "СППС №50401",
    address: "г. Солигорск, ул. Заслонова, д.2-132",
    working_hours: "Пн-Сб: с 10:00 до 20:00, обед с 14:00 до 14:30",
    phone: "+375-174-00-00-00",
    delivery_address: "г. Солигорск, ул. Заслонова, д.2-132, Беларусь"
  }
];

function calculatePrice(weight) {
  // Новые тарифы на основе актуальной информации
  if (weight <= 5.0) return 10.0;
  if (weight <= 10.0) return 12.0;
  if (weight <= 20.0) return 14.0;
  if (weight <= 30.0) return 16.0;
  if (weight <= 35.0) return 18.0;
  if (weight <= 40.0) return 20.0;
  if (weight <= 55.0) return 35.0;
  if (weight <= 90.0) return 50.0;
  if (weight <= 120.0) return 60.0;
  if (weight <= 149.0) return 70.0;
  if (weight <= 200.0) return 100.0;
  if (weight <= 250.0) return 150.0;
  return 200.0; // Для веса свыше 250 кг
}

exports.handler = async (event, context) => {
  if (event.httpMethod === 'OPTIONS') {
    return {
      statusCode: 200,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',
        'Access-Control-Allow-Headers': 'Accept, Accept-Language, Content-Language, Content-Type',
        'Content-Type': 'application/json'
      },
      body: ''
    };
  }

  try {
    const requestBody = JSON.parse(event.body);
    const { order } = requestBody;

    // Извлекаем город из разных возможных источников
    const fullLocalityName = order.shipping_address?.full_locality_name || '';
    const locationCity = order.shipping_address?.location?.city || '';
    const locationSettlement = order.shipping_address?.location?.settlement || '';
    const shippingCity = order.shipping_address?.city || '';
    
    // Пытаемся определить город по разным полям
    const city = fullLocalityName || locationCity || locationSettlement || shippingCity;
    
    // Получаем вес заказа
    const totalWeightStr = order.total_weight || '0';
    const totalWeight = parseFloat(totalWeightStr) || 0;

    // Фильтруем ПВЗ по городу
    let filteredPoints = pickupPoints;
    if (city && city.trim()) {
      const cityNameToMatch = city.toLowerCase().trim();
      filteredPoints = pickupPoints.filter(point => {
        const pointCity = point.city.toLowerCase();
        return cityNameToMatch.includes(pointCity) || 
               pointCity.includes(cityNameToMatch) ||
               cityNameToMatch === pointCity;
      });
    }

    const tariffs = filteredPoints.map(point => {
      const price = calculatePrice(totalWeight);
      
      // Формируем полный адрес для full_locality_name
      const fullAddress = point.delivery_address || 
                         `${point.address}, ${point.city}, Беларусь`;

      // Основной ответ по формату InSales документации
      return {
        // Базовые поля тарифа
        id: point.id,                    // Добавляем id для pickup points
        tariff_id: `pvz_${point.id}`,    // Обязательное поле для множественных тарифов
        shipping_company_handle: 'autolight_express',
        price: price,
        currency: 'BYN',
        
        // Информация о доставке
        title: `${point.name}`,
        description: `${point.address} (${point.working_hours})`,
        
        // Интервал доставки
        delivery_interval: {
          min_days: 1,
          max_days: 1,
          description: `1 день`
        },
        
        // КРИТИЧНО: Правильный формат shipping_address по документации
        shipping_address: {
          // Это поле должно заполнить UI InSales
          full_locality_name: fullAddress,
          // Дополнительные поля адреса
          address: point.address,
          city: point.city,
          country: 'Беларусь',
          postal_code: '',
          
          // Дополнительная информация для pickup point
          pickup_point_name: point.name,
          pickup_point_hours: point.working_hours,
          pickup_point_phone: point.phone
        },
        
        // КРИТИЧНО: fields_values по официальному формату документации
        fields_values: [
          {
            // Поле для заполнения адреса в UI (по документации InSales)
            handle: 'shipping_address[address]',
            value: point.address,
            name: 'Адрес доставки'
          },
          {
            // Альтернативный формат поля адреса
            handle: 'shipping_address_address',
            value: point.address
          },
          {
            // Поле для полного адреса
            handle: 'shipping_address[full_locality_name]',
            value: fullAddress
          },
          {
            // Дополнительное поле с полным адресом
            handle: 'full_locality_name',
            value: fullAddress
          },
          {
            // Простое поле адреса
            handle: 'address',
            value: fullAddress
          },
          {
            // Поле с ID pickup point
            handle: 'pickup_point_id',
            value: point.id.toString()
          },
          {
            // Информация о pickup point
            handle: 'pickup_point_info',
            value: `ПВЗ: ${point.name}. ${point.address}. Часы: ${point.working_hours}. Тел: ${point.phone}`
          }
        ],
        
        // Служебные поля
        phones: [point.phone || ''],
        payment_method: ['CASH', 'CARD', 'PREPAID'],
        errors: [],
        warnings: []
      };
    });

    return {
      statusCode: 200,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',
        'Access-Control-Allow-Headers': 'Accept, Accept-Language, Content-Language, Content-Type',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(tariffs)
    };

  } catch (error) {
    return {
      statusCode: 500,
      headers: {
        'Access-Control-Allow-Origin': '*',
        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',
        'Access-Control-Allow-Headers': 'Accept, Accept-Language, Content-Language, Content-Type',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ 
        error: error.message,
        errors: [error.message],
        warnings: []
      })
    };
  }
};
