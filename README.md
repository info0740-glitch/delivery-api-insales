# Delivery API Service –¥–ª—è InSales

–í–Ω–µ—à–Ω–∏–π API —Å–µ—Ä–≤–∏—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å InSales, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π:
- –ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤ —Å –∞–¥—Ä–µ—Å–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã
- –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Å–∞ —Ç–æ–≤–∞—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
npm start
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
curl http://localhost:3000/health

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏
curl http://localhost:3000/pickup-points

# –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ –∫—É—Ä—å–µ—Ä–æ–º
curl -X POST http://localhost:3000/api/delivery/calculate \
  -H "Content-Type: application/json" \
  -d '{
    "order": {
      "total_weight": 2.5
    },
    "address": {
      "city": "–ú–∏–Ω—Å–∫",
      "full_locality_name": "–≥.–ú–∏–Ω—Å–∫"
    }
  }'
```

## üì° API Endpoints

### POST /api/delivery/calculate
–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "order": {
    "total_weight": 2.5,
    "items_price": 150.00
  },
  "address": {
    "city": "–ú–∏–Ω—Å–∫",
    "full_locality_name": "–≥.–ú–∏–Ω—Å–∫",
    "country": "BY"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "price": 10.0,
    "delivery_interval": {
      "min_days": 1,
      "max_days": 2
    },
    "shipping_company_handle": "autolight_express",
    "title": "–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å",
    "description": "–î–æ—Å—Ç–∞–≤–∫–∞ –≤ –ú–∏–Ω—Å–∫",
    "tariff_id": "standard_delivery",
    "fields_values": [],
    "warnings": []
  }
]
```

### POST /api/pickup-points
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "order": {
    "total_weight": 1.5,
    "items_price": 100.00
  },
  "address": {
    "city": "–ú–∏–Ω—Å–∫",
    "full_locality_name": "–≥.–ú–∏–Ω—Å–∫"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 6,
    "latitude": 53.9006,
    "longitude": 27.5590,
    "shipping_company_handle": "–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å",
    "price": 7.0,
    "title": "–°–ü–ü–° ‚Ññ00101",
    "type": "pvz",
    "address": "–≥.–ú–∏–Ω—Å–∫, —É–ª.–õ–µ–Ω–∏–Ω–∞, 12",
    "description": "–ú–∏–Ω—Å–∫ - –°–ü–ü–° ‚Ññ00101",
    "phones": ["+37517212345"],
    "delivery_interval": {
      "min_days": 1,
      "max_days": 2
    },
    "fields_values": [],
    "payment_method": ["CASH", "CARD", "PREPAID"],
    "tariffs": [
      {
        "id": "standard_pickup",
        "price": 7.0,
        "title": "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞",
        "delivery_interval": {
          "min_days": 1,
          "max_days": 2
        },
        "fields_values": []
      }
    ]
  }
]
```

### POST /api/pickup-point/calculate
–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```json
{
  "point_id": 6,
  "order": {
    "total_weight": 3.2
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "price": 10.0,
  "delivery_interval": {
    "min_days": 1,
    "max_days": 2
  },
  "shipping_company_handle": "–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å",
  "title": "–°–ü–ü–° ‚Ññ00101",
  "description": "–ú–∏–Ω—Å–∫ - –°–ü–ü–° ‚Ññ00101",
  "address": "–≥.–ú–∏–Ω—Å–∫, —É–ª.–õ–µ–Ω–∏–Ω–∞, 12",
  "working_hours": "–ü–Ω-–ü—Ç: —Å 09:00 –¥–æ 20:00, –æ–±–µ–¥ —Å 13:00 –¥–æ 14:00; –°–±.: —Å 10:00 –¥–æ 18:00",
  "fields_values": [],
  "tariff_id": "pickup_delivery",
  "payment_method": ["CASH", "CARD", "PREPAID"]
}
```

## üí∞ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Å—É

```javascript
WEIGHT_PRICING = {
    base_price: 5.0,
    weight_steps: [
        { max_weight: 1, price: 5.0 },    // –¥–æ 1 –∫–≥ = 5.00 BYN
        { max_weight: 3, price: 7.0 },    // –¥–æ 3 –∫–≥ = 7.00 BYN
        { max_weight: 5, price: 10.0 },   // –¥–æ 5 –∫–≥ = 10.00 BYN
        { max_weight: 10, price: 15.0 },  // –¥–æ 10 –∫–≥ = 15.00 BYN
        { max_weight: 20, price: 25.0 },  // –¥–æ 20 –∫–≥ = 25.00 BYN
        { max_weight: 50, price: 40.0 }   // –¥–æ 50 –∫–≥ = 40.00 BYN
    ]
}
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å InSales

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ InSales

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ InSales**
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ ‚Üí –î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "–í–Ω–µ—à–Ω–∏–π —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏"**
4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:**

```xml
<!-- –î–ª—è –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ -->
<delivery_variant>
  <title>–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å (–ö—É—Ä—å–µ—Ä)</title>
  <type>DeliveryVariant::External</type>
  <url>https://your-domain.hostfly.by/api/delivery/calculate</url>
  <api_version>v2</api_version>
  <description>–ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ë–µ–ª–∞—Ä—É—Å–∏</description>
  <delivery_locations_attributes type="array">
    <delivery_location>
      <country>BY</country>
    </delivery_location>
  </delivery_locations_attributes>
</delivery_variant>

<!-- –î–ª—è –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ -->
<delivery_variant>
  <title>–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å (–ü—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏)</title>
  <type>DeliveryVariant::PickUp</type>
  <description>–î–æ—Å—Ç–∞–≤–∫–∞ –≤ –ø—É–Ω–∫—Ç—ã –≤—ã–¥–∞—á–∏</description>
  <pick_up_sources_attributes type="array">
    <pick_up_source>
      <title>–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å –ü–í–ó</title>
      <http_method>POST</http_method>
      <url>https://your-domain.hostfly.by/api/pickup-points</url>
      <point_info_url>https://your-domain.hostfly.by/api/pickup-point/calculate</point_info_url>
    </pick_up_source>
  </pick_up_sources_attributes>
  <delivery_locations_attributes type="array">
    <delivery_location>
      <country>BY</country>
    </delivery_location>
  </delivery_locations_attributes>
</delivery_variant>
```

### JavaScript –∫–æ–¥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```javascript
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
function customizeDeliveryCalculation() {
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ
    console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏...');
}

// –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
window.InSalesAPI.onOrderUpdate = function(orderData) {
    console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:', orderData);
    // –í–∞—à–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞
};
```

## üåê –î–µ–ø–ª–æ–π –Ω–∞ GitHub –∏ —Ö–æ—Å—Ç–∏–Ω–≥

### –í–∞—Ä–∏–∞–Ω—Ç 1: GitHub Pages (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥)

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub**
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Pages:**
   - Settings ‚Üí Pages ‚Üí Source: Deploy from a branch
   - –í—ã–±–µ—Ä–∏—Ç–µ main branch / root folder
4. **–í–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:** `https://–≤–∞—à-username.github.io/–∏–º—è-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è`

### –í–∞—Ä–∏–∞–Ω—Ç 2: Netlify (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Netlify**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∏–ª–¥:**
   - Build command: `npm install`
   - Publish directory: `/`
3. **–î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª `netlify.toml`:**

```toml
[build]
  publish = "."
  command = "npm install && npm start"

[[redirects]]
  from = "/api/*"
  to = "/server.js"
  status = 200
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–∞—à —Ö–æ—Å—Ç–∏–Ω–≥ hostfly.by

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–¥–æ–º–µ–Ω:** `delivery-api.–≤–∞—à-–¥–æ–º–µ–Ω.ru`
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ FTP/cPanel**
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js** (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–º)
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è InSales

```bash
# –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏
curl -X POST https://–≤–∞—à-api.–¥–æ–º–µ–Ω.by/api/delivery/calculate \
  -H "Content-Type: application/json" \
  -d '{
    "order": {
      "total_weight": 2.5,
      "items_price": 150.00,
      "order_lines": [
        {
          "quantity": 1,
          "weight": 2.5,
          "dimensions": "30x20x10"
        }
      ]
    },
    "address": {
      "full_locality_name": "–≥.–ú–∏–Ω—Å–∫",
      "city": "–ú–∏–Ω—Å–∫",
      "country": "BY"
    }
  }'

# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏
curl -X POST https://–≤–∞—à-api.–¥–æ–º–µ–Ω.by/api/pickup-points \
  -H "Content-Type: application/json" \
  -d '{
    "order": {
      "total_weight": 1.5,
      "items_price": 100.00
    },
    "address": {
      "full_locality_name": "–≥.–ú–∏–Ω—Å–∫",
      "city": "–ú–∏–Ω—Å–∫"
    }
  }'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä—É–µ—Ç:
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã (—á–µ—Ä–µ–∑ morgan)
- –û—à–∏–±–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ñ–∞–π–ª:

```bash
# –ó–∞–ø—É—Å–∫ —Å –∑–∞–ø–∏—Å—å—é –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
npm start > logs/app.log 2>&1
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
PORT=3000                    # –ü–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞
NODE_ENV=production         # –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
LOG_LEVEL=info             # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `WEIGHT_PRICING` –≤ —Ñ–∞–π–ª–µ `server.js`:

```javascript
const WEIGHT_PRICING = {
    base_price: 5.0,
    weight_steps: [
        { max_weight: 1, price: 5.0 },
        { max_weight: 5, price: 10.0 },
        { max_weight: 10, price: 15.0 },
        // –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ —Ç–∞—Ä–∏—Ñ—ã
    ]
};
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏ –≤ –º–∞—Å—Å–∏–≤ `PICKUP_POINTS_DATA`:

```javascript
{
    id: 7,
    city: "–ù–æ–≤–æ–ø–æ–ª–æ—Ü–∫",
    address: "–≥.–ù–æ–≤–æ–ø–æ–ª–æ—Ü–∫, —É–ª.–ú–æ–ª–æ–¥–µ–∂–Ω–∞—è, 15",
    title: "–°–ü–ü–° ‚Ññ70101",
    working_hours: "–ü–Ω-–ü—Ç: —Å 10:00 –¥–æ 18:00",
    type: "pvz",
    latitude: 55.5304,
    longitude: 28.6363,
    shipping_company_handle: "–ê–≤—Ç–æ–ª–∞–π—Ç –≠–∫—Å–ø—Ä–µ—Å—Å",
    phone: "+37521412345"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Netlify —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤:

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ netlify/functions
cd netlify/functions

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
node run-tests.js

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
node test-local.js          # –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
node test-extended.js       # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
node prepare-and-test.js    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```bash
# Windows
run-tests.bat

# Linux/Mac
chmod +x run-tests.sh
./run-tests.sh
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

- **`test-local.js`** - –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≥–æ—Ä–æ–¥—É
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

- **`test-extended.js`** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –Ω–∞–∑–≤–∞–Ω–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∞–¥—Ä–µ—Å–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è InSales
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤–µ—Å–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å HTML —Ñ–∞–π–ª–æ–º

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –¥–æ–±–∞–≤—å—Ç–µ –≤ `package.json`:

```json
{
  "scripts": {
    "test": "node netlify/functions/run-tests.js",
    "prebuild": "npm test"
  }
}
```

–ò–ª–∏ –≤ `netlify.toml`:

```toml
[build]
  command = "cd netlify/functions && node prepare-and-test.js && cd ../.. && npm run build"
```

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **CORS –æ—à–∏–±–∫–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω InSales –¥–æ–±–∞–≤–ª–µ–Ω –≤ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

2. **–û—à–∏–±–∫–∏ 404:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL endpoints
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É

3. **–û—à–∏–±–∫–∏ —Ä–∞—Å—á–µ—Ç–∞:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É –≤–µ—Å–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞

4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

5. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ pickup-points.json
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/health` endpoint –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.